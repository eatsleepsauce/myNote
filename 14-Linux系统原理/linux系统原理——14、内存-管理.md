#### 内存管理

一个内存管理系统至少应该做三件事情：

- 第一，虚拟内存空间的管理，每个进程看到的是独立的、互不干扰的虚拟地址空间；

- 第二，物理内存的管理，物理内存地址只有内存管理模块能够使用；

- 第三，内存映射，需要将虚拟内存和物理内存映射、关联起来。课堂练习

虚拟内存一分为二，一部分用来放内核的东西，称为 **内核空间**，一部分用来放进程的东西，称为 **用户空间**。

普通进程的视角，觉着整个空间是它独占的，没有其他进程存在。当然另一个进程也这样认为，因为它们互相看不到对方。但是到了内核里面，无论是从哪个进程进来的，看到的都是同一个内核空间，看到的都是同一个进程列表。虽然内核栈是各用各的，但是如果想知道的话，还是能够知道每个进程的内核栈在哪里的。所以，如果要访问一些公共的数据结构，需要进行锁保护。

<img src="https://liuyang-picbed.oss-cn-shanghai.aliyuncs.com/img/4ed91c744220d8b4298237d2ab2eda9d.jpeg" alt="img" style="zoom:67%;" />