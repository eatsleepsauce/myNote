#### 变量、类型、运算符与表达式

##### 一、变量

**变量名**，是由字母和胡子组成的序列，但其第一个字符必须为字母。下划线“_”被看作字母，通常用与命名较长但变量名，以提高其可读性。变量名使用小写字母，符号常量名全部使用大写字母。选择但变量名要能够尽量从字面上表达变量但用途。

##### 二、类型

**C语言提供的基本数据类型：**

- char 字符型，占用一个字节，可以存放本地字符集中到一个字符

- int 整型，通常反映了所用机器中整数的自然长度(各编译器根据硬件特性自主选择合适的类型长度)

- float 单精度浮点型

- double 双精度浮点型

此外，还可以在这些基本数据类型的前面加上一些限定符，short 与 long、signed 与 unsigned。各类型的长度在不同的系统上，这些类型占据的字节长度是不同：
在32 位的系统上
short 占据的内存大小是2 个byte；
int占据的内存大小是4 个byte；
long占据的内存大小是4 个byte；
float占据的内存大小是4 个byte；
double占据的内存大小是8 个byte；
char占据的内存大小是1 个byte。

具体可以用sizeof测试一下即可，有关这些类型长度定义的符号常量以及其他与机器和编译器有关的属性可以在标注头文件<limits.h> 与<float.h>中找到。

short 与long限定整型的示例（关键字int可以省略）：
```c
short int sh；
long int counter；
```

##### 三、常量

###### 1、整数常量

如 123，long类型的常量是以字母l或L结尾，如123456l。如果一个整数太大以至于无法用int表示，也将被当作long类型处理。无符号常量以字母u或U结尾。后缀ul或UL表明是unsigned long 类型。
整型数除了用十进制表示外，还可以用八进制或十六进制表示。带前缀0的整型常量表示它为八进制形式；前缀为0x或0X，则表示它为十六进制形式。

###### 2、浮点数常量

如123.4 或一个指数 1e-2，没有后缀的浮点常量为double类型。后缀f或F表示float类型，而后缀l或L则表示long double类型。

###### 3、字符常量

字符常量就是一个整数，书写时将一个字符括在单引号中，如'x'（数值参ASCII字符集，如'0'的值为48）。

某些字符可以通过转义字符序列表示为字符和字符串常量。转移字符序列看起来像两个字符，但只表示一个字符，如：'\n'换行符；另外还可以用'\ddd'(ddd代表1-3个八进制数)或'\xhh'(hh是一个或多个十六进制数字)来表示字符。

```
#define VTAB '\013'  /* ASCII 纵向制表符 \v  */
#define VTAB '\xb'
```
<img src="https://liuyang-picbed.oss-cn-shanghai.aliyuncs.com/2020-12-08-145752.png" alt="转义字符.png" style="zoom: 67%;" />

###### 4、常量表达式

仅仅包含常量表达式。这种表达式在编译时求值，而不在运行时求值，它可以出现在常量可以出现的任何位置，例如：

```c
#define MAXLINE 1000
char line[MAXLINE + 1];
```
###### 5、字符串常量

也叫做字符串面值，使用双引号括起来的0个或多个字符组成的字符序列。如："I am a string"转移字符也可以用在字符串中。

字符串常量就是字符数组。字符串的内部表示使用一个空白字符'\0'作为串的结尾，因此，存储字符串的物理存储单元数比括号中的字符数多一个。

###### 6、枚举常量

枚举是一个常量整型值的列表，如：

```c
enum boolean{NO, YES};
```
在没有显式说明的情况下，enum类型中的第一个枚举名的值为0，第二个为1，以此类推。如果只制定来部分枚举的值，那么未指定值的枚举名值将依着最后一个指定值向后递增。
```c
enum escapes { BELL = '\a' , BACKSPACE = '\b' , TAB = '\t'};
enum months {JAN = 1 ,  FEB ,  MAR , APR , MAY }; /* FEB的值为2，MAR的值为3，以此类推 */
```

##### 四、声明

所有变量都必须先声明后使用，一个声明指定一种变量类型，后面所带都变量表可以包含一个或多个该类型的变量。

```c
int lower, upper, step;
```
还可以在声明的同时对变量进行初始化，如： 
```c
char esc = '\\';
```

##### 五、运算符

###### 1、算术运算符

二元算术运算符包括：+、-、*、/、%(取模运算符)。整数除法会截断结果中的小数部分。取模运算符%不能应用于float或double类型。

###### 2、关系运算符与逻辑运算符

关系运算符包括下列几个运算符：> 、>=、 <、 <=  它们具有相同的优先级，优先级仅次于它们的是相等性运算符：==  、!=

关系运算符的优先级比算术运算符的低。因此，表达式 i   < lim - 1 等价于 i  < (lim -1)。

逻辑运算符&& 与 ||，由&& 与 || 连接的表达式按从左到右的顺序进行求值（短路运算），&&的优先级比||的优先级高，但都比关系运算符和相等性运算符都优先级低。

###### 3、类型转换

当一个运算符的几个操作数类型不同时，就需要通过一些规则把它们转换为某种共同的类型。一般来说，自动转换是指把“比较窄的”操作数转换为“比较宽的”操作数，并且不丢失信息的转换。

一般来说，如果二元运算符的两个操作数具有不同的类型，那么在进行运算之前先把“较低”的类型提升为“较高”的类型。运算的结果为较高的类型。

任何表达式中都可以用一个称为“强制类型转换”的一元运算符进行显式类型转换。
(类型名) 表达式  如：(double) n;  注意，强制类型转换只是生成两一个指定类型的n的值，n本身的值没有改变。

###### 4、自增运算符与自减运算符

++ --，自增运算符++使其操作数递增1，自减运算符--使其操作数递减1。这两个操作符既可作前缀运算符也可作后缀运算符。**自增与自减运算符只能作用于变量**，表达式(i+j) ++ 是非法的。

x = n++;如果n为5，执行后，n=6 x=5；
x = ++n;如果n为5，执行后，n=6 x=6；

###### 5、位运算符

C语言提供了6个位操作符，这些运算符只能作用与整型操作数，即只能作用于带符号或无符号的char、short、int与long类型。

& 按位与(AND)、| 按位或(OR)、^ 按位异或(XOR)、<< 左移、>>右移、~ 按位求反(一元运算符)

按位与运算符&经常用于屏蔽某些二进制位，例如：n = n & 0177，将n中除7个低二进制外的其他各位均置为0。
按位或运算符 | 常用于将某些二进制位置为1。
按位异或运算符^用于当两个操作数对应位不相同时将该位置为1。

位移运算符<< 与 >>分别用于将运算符当左操作数左移和右移，移动的位数则由右操作数指定 (右操作数的值必须是非负值)。因此，表达式x<<2将把x的值左移2位，右边空出的2位用0填补，该表达式等价于对左操作数乘以4。对unsigned类型对无符号值进行右移时，左边空出对部分用0填补，当对signed类型的带符号值进行右移时，某些机器将对左边空出的部分用符号位填补(算术位移)，而另一些机器则对左边空出对部分用0填补(逻辑位移)。

一元运算符~用于求整数对二进制反码，即分别将操作各二进制位上的1变为0，0变为1。

###### 6、赋值运算符与表达式

在赋值表达式中，如果表达式左边的变量重复出现在表达式的右边，如：i = i + 2；则可以缩写成 i += 2；+=就称为赋值运算符。
大多数二元运算符都有一个相应的赋值运算符op= ，其中op可以是 +、-、*、/、%、>>、<<、&、^、| 之一。

###### 7、条件表达式

expr1 ? expr2 : expr3，首先计算expr1，如果其值不等于0（为真），则计算expr2的值，并以该值作为条件表达式的值，否则计算expr3的值，并以该值作为条件表达式的值。

```
z = （a > b) ? a : b; /* z = max(a,b) */
```



C语言提供了一个一元运算符sizeof，它可用来计算任一对象的长度。

表达式：sizeof 对象    以及    sizeof(类型名)