#### 标准库

标准库不是C语言本身的构成部分，但是支持标准C的实现会提供该函数库中的函数声明、类型以及宏定义。

标准库中的函数、类型以及宏定义分别在下面的标准头文件中定义：

```c
<assert.h> <float.h> <math.h> <stdarg.h> <stdlib.h>
<ctype.h> <limits.h> <setjmp.h> <stddef.h> <string.h>
<errno.h> <locale.h> <signal.n> <stdio.h> <time.h>
```

可以通过下列方式访问头文件：

```
#include <头文件>
```

##### 一、输入与输出 <stdio.h>

头文件<stdio.h>中定义的输入和输出函数、类型以及宏的数目几乎占整个标准库的三分之一。

**流（stream）**，是与磁盘或其他外围设备关联的 **数据的源** 或 **目的地**。而流又分为 文本流 和 二进制流：

- **文本流** 是由文本行组成的序列，每一行包含 0 个 或 多个 字符，并以 '\n' 结尾
- 二进制流 是由未经处理的字节构成的序列

**打开流**，就是将流与一个文件或设备连接起来；**关闭流**，就是断开与文件或设备的连接。

**打开一个文件将返回一个指向 FILE类型对象的指针，该指针纪录了 控制该流的所有信息**，**不区分 “文件指针”  和 “流”**。

**程序开始执行时，stdin、stdout 和 stderr 这三个流 已经处于打开状态。**

###### 1、文件操作

**（1）fopen函数**

```c
FILE *fopen(const char *filename, const char *mode)
```

fopen函数打开filename指定的文件，并返回一个与之相关联的流。如果打开操作失败，则返回NULL。

mode是访问模式：

- "r" 打开文本文件用于读
- "w"  创建文本文件用于写，并删除已存在的内容（如果有的话）
- "a"  追加；打开或创建文本文件，并向文件末尾追加内容
- "r+" 打开文本文件用于更新（即读和写）
- "w+"  创建文本文件用于更新，并删除以存在的内容（如果有的话）
- "a+"  追加；打开或创建文本文件用于更新，写文件时追加到文件末尾

后3种方式（更新方式）允许对同一个文件进行读和写。在读和写的交叉过程中，必须调用fflush函数或文件定位函数。如果上述访问模式之后再加上b，如 "rb" 或者 "w+b"等，则表示对二进制文件进行操作。

文件名 **filename** 限定最多为 FILENAME_MAX 个字符。一次最多可打开 FOPEN_MAX 个文件。

**（2）freopen函数**

```c
FILE *freopen(const char *filename, const char *mode, FILE *stream)
```

freopen函数以mode指定的模式打开filename指定的文件，并将该文件关联到stream指定流。它返回strem；若出错，则返回NULL。**freopen函数一般用于改变与stdin、stdout 和 stderr 相关联的文件**。

**（3）fflush函数**

```c
int fflush(FILE *stream)
```

对于输出流来说，fflush函数将已经写到缓冲区但尚未写入文件的所有数据写到文件中。对于输入流来说，其结果是未定义的。如果在写的过程中发生错误，则返回EOF，否则返回0。**fflush(NULL)** 将清洗所有的输出流。

**（4）fclose函数**

```c
int fclose(FILE *stream)
```

fclose函数将所有未写入的数据写入stream中，丢弃缓冲区中的所有未读入数据，并释放自动分配的全部缓冲区，最后关闭流。若出错则返回EOF，否则返回0。

**（5）remove函数**

```c
int remove(const char *filename)
```

remove函数删除filename指定的文件，这样，后续试图打开该文件的操作将失败，如果删除操作失败，则返回一个非 0 值。

**（6）rename函数**

```c
int rename(const char *oldname, const char *newname)
```

rename函数修改文件的名字，如果操作失败，则返回一个非0值。

**（7）tmpfile函数**

```c
FILE *tempfile(void)
```

tmpfile函数以模式"wb+"创建一个临时文件，该文件在被关闭或程序正常结束时将被自动删除。如果创建操作成功，该函数返回一个流；如果创建文件失败，则返回NULL。

**（8）tmpnam函数**

```c
char *tmpnam(char s[L_tmpnam])
```

tempnam(NULL)函数创建一个与现有文件名不同的字符串，并返回一个指向一内部静态数组的指针。tmpnam(s)函数把创建的字符串保存到数组s中，并将它作为函数返回值。s中至少要有L_tmpnam个字符的空间。**tmpnam函数在每次被调用时均生成不同的名字**。在程序执行的过程中，最多只能确保生存 TMP_MAX个不同的名字。

注意：**tmpnam函数只是用于创建一个名字，而不是创建一个文件**。

**（9）setvbuf函数**

```c
int setvbuf(FILE *stream, char *buf, int mode, size_t size)
```

setvbuf函数控制流stream的缓冲。在执行读、写以及其他任何操作之前必须调用此函数。

当mode的值为 _IOFBF时，将进行完全缓冲。当mode的值为 _IOLBF，将对文本文件进行 **行缓冲**，当mode的值为 _IONBF时，表示不设置缓冲。

如果buf的值不是NULL，则setvbuf函数将buf指向的区域作为流的缓冲区，否则将分配一个缓冲区。size决定缓冲区的长度。如果setvbuf函数出错，则返回一个非0的值。

（size_t 是有运算符sizeof 生存的五符号整数）。

**（10）setbuf函数**

```c
void setbuf(FILE *stream, char *buf)
```

如果buf的值为NULL，则关闭流stream的缓冲；否则setbuf函数等开 (void) setvbuf(stream, buf, _IOFBF, BUFSIZ)。

###### 2、格式化输出



###### 3、格式化输入



###### 4、字符输入输出函数



###### 5、直接输入输出函数



###### 6、文件定位函数



###### 7、错误处理函数