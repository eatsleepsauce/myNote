#### PaaS平台的本质

##### 一、软件工程能力

###### 1、提高服务的SLA

所谓服务的 SLA，也就是我们能提供多少个 9 的系统可用性，而每提高一个 9 的可用性都是对整个系统架构的重新洗礼。提高系统的 SLA 主要表现在两个方面：

- 高可用的系统
- 自动化的运维

###### 2、能力和资源重用或复用

软件工程还有一个重要的能力就是让能力和资源可以重用。其主要表现在如下两个方面：

- 软件模块的重用
- 软件运行环境和资源的重用

###### 3、过程的自动化

编程本来就是把一个重复工作自动化的过程，所以，软件工程的第三个本质就是把软件生产和运维的过程自动化起来。也就是下面这两个方面：

- 软件生产流水线
- 软件运维自动化

软件工程的能力体现和分布式的技术点是高度一致的，也就是下面这三个方面的能力：

- 分布式多层的系统架构
- 服务化的能力供应
- 自动化的运维能力

##### 二、PaaS平台的本质

一个好的 PaaS 平台应该具有分布式、服务化、自动化部署、高可用、敏捷以及分层开放的特征，并可与 IaaS 实现良好的联动。

<img src="https://liuyang-picbed.oss-cn-shanghai.aliyuncs.com/img/966f319745518156545e34d85eee010b.png" alt="img" style="zoom:67%;" />

下面这三件事是 PaaS 跟传统中间件最大的差别：

- **服务化是 PaaS 的本质**，软件模块重用，服务治理，对外提供能力是 PaaS 的本质。
- **分布式是 PaaS 的根本特性**，多租户隔离、高可用、服务编排是 PaaS 的基本特性。
- **自动化是 PaaS 的灵魂**，自动化部署安装运维，自动化伸缩调度是 PaaS 的关键。

##### 三、PaaS平台的总体架构

<img src="https://liuyang-picbed.oss-cn-shanghai.aliyuncs.com/img/f65ccf66daf8d01d59fa8948c8136c68.png" alt="img" style="zoom:67%;" />

在 Docker+Kubernetes 层之上，我们看到了两个相关的 PaaS 层。一个是 PaaS 调度层，很多人将其称为 iPaaS；另一个是 PaaS 能力层，通常被称为 aPaaS。没有 PaaS 调度层，PaaS 能力层很难被管理和运维，而没有 PaaS 能力层，PaaS 就失去了提供实际能力的业务价值。

在两个相关的 PaaS 层之上，有一个流量调度的接入模块，这也是 PaaS 中非常关键的东西。流控、路由、降级、灰度、聚合、串联等等都在这里，包括最新的 AWS Lambda Service 的小函数等也可以放在这里。这个模块应该是像 CDN 那样来部署的。

然后，在这个图的两边分别是与运营和运维相关的。运营这边主要是管理一些软件资源方面的东西（类似 Docker Hub 和 CMDB），以及外部接入和开放平台上的东西，这主要是对外提供能力的相关组件；而运维这边主要是对内的相关东西，主要就是 DevOps。

总结一下，一个完整的 PaaS 平台会包括以下几部分：

- **PaaS 调度层** – 主要是 PaaS 的自动化和分布式对于高可用高性能的管理。
- **PaaS 能力服务层** – 主要是 PaaS 真正提供给用户的服务和能力。
- **PaaS 的流量调度** – 主要是与流量调度相关的东西，包括对高并发的管理。
- **PaaS 的运营管理** – 软件资源库、软件接入、认证和开放平台门户。
- **PaaS 的运维管理** – 主要是 DevOps 相关的东西。

##### 四、PaaS平台的生产和运维

<img src="https://liuyang-picbed.oss-cn-shanghai.aliyuncs.com/img/61b89202b59959df224ae8ff29bdf0dd.png" alt="img" style="zoom:67%;" />

从左上开始软件构建，进入软件资产库（Docker Registry+ 一些软件的定义），然后走 DevOps 的流程，通过整体架构控制器进入生产环境，生产环境通过 **控制器操作 Docker+Kubernetes 集群进行软件部署和生产变更**。

其中，同步服务的运行状态，并通过 **生命周期管理来拟合状态** ，如图右侧部分所示。服务运行时的数据会进入到相关应用监控，**应用监控中心的一些监控事件会同步到生命周期管理**  中，再由生命周期管理器来做出决定，通过控制器来调度服务运行。当应用监控中心发现流量变化，要进行强制性伸缩时，它通过生命周期管理来通知控制系统进行伸缩。

左下是服务接入的相关组件，主要是网关服务，以及 API 聚合编排和流程处理。这对应于之前说过的流量调度和 API Gateway 的相关功能。



IaaS、PaaS、Saas  https://www.jianshu.com/p/76987116ef91

<img src="https://liuyang-picbed.oss-cn-shanghai.aliyuncs.com/img/11464107-ba4bd72316850c0a.jpg" alt="img" style="zoom:50%;" />